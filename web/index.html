<!DOCTYPE html>
<html>
    <head>
        <title>Convolvr</title>
        <meta content="utf-8" http-equiv="encoding">
        <meta name='viewport' content='width=device-width, initial-scale=1' />
        <link rel='icon' type='image/png' sizes='192x192' href='/images/icon.png' />
        <meta name='theme-color' content='rgb(20, 20, 20)' />
        <meta name="msapplication-TileColor" content="#151515" />
        <meta name="application-name" content="Convolvr" />
        <meta name="description" content="Modular webvr world builder, social platform and authoring tool." />
        <meta property="og:title" content="Convolvr" />
        <meta property="og:description" content="Modular webvr world builder, social platform and authoring tool." />
        <meta property="og:image" content="Facebook image" / >
        <meta property="og:image:width" content="192" />
        <meta property="og:image:height" content="192" />
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="https://convolvr.io" />
        <meta name="twitter:title" content="Convolvr" />
        <meta name="twitter:description" content="Modular webvr world builder, social platform and authoring tool." />
        <meta name="twitter:image" content="Twitter image" />
        <style>
			body {
				padding: 0;
				margin: 0;
                width: 100%;
                height:100%;
                overflow-x: hidden;
                position: absolute;
                font-size: 20px;
                font-family: sans-serif;
				background: #241631;
				color: #303030;
			}
			h1 {

            }
			canvas {
				position: fixed;
				z-index: 2;
			}
		</style>
    </head>
    <body>
        <main id="root"></main>
        <link rel='stylesheet' href='/css/app.css' />
        <script type="x-shader/x-vertex" id="sky-vertex">
            #ifdef GL_ES
            precision highp float;
            #endif
            varying vec2 vUv;
            void main () {
                vUv = uv;
                gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
            }
        </script>
        <script type="x-shader/x-fragment" id="sky-fragment">
            #ifdef GL_ES
            precision mediump float;
            #endif
            varying vec2 vUv;
            uniform float time;
            //3.141592654
            float hash( float n )
            {
                return fract(sin(n)*43758.5453);
            }

            float noise( vec3 x )
            {
                // The noise function returns a value in the range -1.0f -> 1.0f

                vec3 p = floor(x);
                vec3 f = fract(x);

                f       = f*f*(3.0-2.0*f);
                float n = p.x + p.y*57.0 + 113.0*p.z;

                return mix(mix(mix( hash(n+0.0), hash(n+1.0),f.x),
                               mix( hash(n+57.0), hash(n+58.0),f.x),f.y),
                           mix(mix( hash(n+113.0), hash(n+114.0),f.x),
                               mix( hash(n+170.0), hash(n+171.0),f.x),f.y),f.z);
            }
            void main( void ) {
                float depth = 1.0-(abs(0.5 - vUv.y) * 4.0);
                float a = noise(vec3(vUv.x, vUv.y, 1.0));
                float a2 = noise(vec3(vUv.x * 10.0, vUv.y * 10.0, 1.0));
                float a3 = noise(vec3(vUv.x * 40.0, vUv.y * 40.0, 1.0));
                float a4 = noise(vec3(vUv.x * 560.0, vUv.y * 140.0, 1.0));
                float x = vUv.x + cos(a + a2 / 10.0 + a3 / 40.0 + a4 / 160.0);
                float y = vUv.y + sin(a + a2 / 10.0 + a3 / 40.0 + a4 / 160.0);
                float intense = abs(mod(cos(x * 3.141592654 * 10.0), 0.4)-0.2);
                intense += abs(mod(cos(x * 3.141592654 * 10.0), 0.4)-0.2);
                intense += abs(mod(cos(x / 4.0 * 3.141592654 * 10.0), 0.4)-0.2);
                intense += abs(mod(cos(x / 16.0 * 3.141592654 * 10.0), 0.4)-0.2);
                intense += abs(mod(sin(y * 3.141592654 * 10.0)*10.0, 0.4) - 0.2);
                intense += abs(mod(sin(y / 4.0 * 3.141592654 * 10.0)*10.0, 0.4) - 0.2);
                intense += abs(mod(sin(y / 16.0 * 3.141592654 * 10.0)*10.0, 0.4) - 0.2);
                intense += abs(mod(sin(y / 64.0 * 3.141592654 * 10.0)*10.0, 0.4) - 0.2);
                intense = pow(intense, 2.0);
                //float waver = 0.06 * -vUv.y *  sin(vUv.x * 3.141592654 * 12.0 );
                float blue = 1.0*intense;
                float red = 0.66*intense;
                float green = 0.11;

                vec4 color = vec4(
                    (intense * ((red * depth))),
                    depth* intense * green,
                    (intense * 1.5 * ((blue * depth))),
                    1.0
                );

                gl_FragColor = color;
            }
        </script>
        <script type="x-shader/x-vertex" id="webcam-vertex">

        </script>
        <script type="x-shader/x-fragment" id="webcam-fragment">

        </script>
        <script src='lib/three.min.js'></script>
        <script src="lib/leap.js"></script>
        <script src="lib/leap-plugins.js"></script>
        <script src='js/app.js'></script>
    </body>
</html>
