<!DOCTYPE html>
<html>
    <head>
        <title>Convolvr</title>
        <meta content="utf-8" http-equiv="encoding">
        <meta name='viewport' content='width=device-width, initial-scale=1' />
        <link rel='icon' type='image/png' sizes='192x192' href='/data/renderwavetv.png' />
        <meta name='theme-color' content='rgb(20, 20, 20)' />
        <meta name="msapplication-TileColor" content="#151515" />
        <meta name="application-name" content="Convolvr" />
        <meta name="description" content="WebVR server for hosting games, 3d chat and social events." />
        <meta property="og:title" content="Convolvr" />
        <meta property="og:description" content="WebVR server for hosting games, 3d chat and social events." />
        <meta property="og:image" content="https://convolvr.io/data/renderwavetv.png" / >
        <meta property="og:image:width" content="192" />
        <meta property="og:image:height" content="192" />
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="https://convolvr.io" />
        <meta name="twitter:title" content="Convolvr" />
        <meta name="twitter:description" content="WebVR server for hosting games, 3d chat and social events." />
        <meta name="twitter:image" content="https://convolvr.io/data/renderwavetv.png" />
        <style>
			body {
				padding: 0;
				margin: 0;
                width: 100%;
                height:100%;
                overflow-x: hidden;
                position: absolute;
                font-size: 20px;
                font-family: sans-serif;
				background: #101010;
				color: #ffffff;
			}
			h1 {

            }
			canvas {
				position: fixed;
				z-index: 2;
			}
		</style>
    </head>
    <body>
        <main id="root"></main>
        <link rel='stylesheet' href='/css/app.css' />
        <script type="x-shader/x-vertex" id="sky-vertex">
            #ifdef GL_ES
            precision highp float;
            #endif
            varying vec2 vUv;
            void main () {
                vUv = uv;
                gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
            }
        </script>
        <script type="x-shader/x-fragment" id="sky-fragment">
            #ifdef GL_ES
            precision mediump float;
            #endif
            varying vec2 vUv;
            uniform float time;
            //3.141592654
            float hash( float n ) {
                return fract(sin(n)*43758.5453);
            }
            float noise( vec3 x ) {
                // The noise function returns a value in the range -1.0f -> 1.0f
                vec3 p = floor(x);
                vec3 f = fract(x);

                f       = f*f*(3.0-2.0*f);
                float n = p.x + p.y*57.0 + 113.0*p.z;

                return mix(mix(mix( hash(n+0.0), hash(n+1.0),f.x),
                               mix( hash(n+57.0), hash(n+58.0),f.x),f.y),
                           mix(mix( hash(n+113.0), hash(n+114.0),f.x),
                               mix( hash(n+170.0), hash(n+171.0),f.x),f.y),f.z);
            }

            void main( void ) {
                float depth = (1.0 - (abs(0.5 - vUv.y) * 2.0));
                float opacity =  2.0* (1.0-(abs(0.5 - (vUv.y)) * 2.0));
                float intense = vUv.y*2.0*abs(0.25 - (vUv.x / 2.0));
                float radial = abs(0.25 - (vUv.x / 2.0));
                float glow = 0.0;

                if ((vUv.y >= 0.5)) {
                    glow = 0.9 * depth* depth;
                    glow -= 0.2;
                } else {
                    glow = -0.2+(depth* depth * vUv.y);
                }
              //  float red = -0.4+glow+radial+depth;
              //  float blue = 1.2+glow+radial+(depth/2.0);
              //  float green = -0.5+glow+radial+depth;
              float red = 0.66*depth;
              float blue = 0.66*depth;
              float green = depth*2.0;
               float luminance = -0.1;
               // implement...
               luminance += 0.1 * depth *radial;
               luminance += 0.1 + radial;
               luminance += 0.1 + opacity * depth*radial;
               vec4 color = vec4(luminance*red, luminance*green, luminance*blue, 1.0);

               gl_FragColor = (color * vec4(0.1+1.0*glow*depth, 0.1+1.0*glow*depth, 0.1+1.0*glow*depth, 1.0));
            }
        </script>
        <script type="x-shader/x-vertex" id="webcam-vertex">

        </script>
        <script type="x-shader/x-fragment" id="webcam-fragment">

        </script>
        <script src='lib/three.min.js'></script>
        <script src='lib/csg.js'></script>
        <script src='lib/ThreeCSG.js'></script>
        <script src='lib/BufferSubdivisionModifier.js'></script>
        <script src='lib/webvr-polyfill.js'></script>
        <script src='lib/VRControls.js'></script>
        <script src='lib/VREffect.js'></script>
        <script src="lib/leap.js"></script>
        <script src="lib/leap-plugins.js"></script>
        <script src='js/app.js'></script>
    </body>
</html>
